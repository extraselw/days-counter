document.addEventListener("DOMContentLoaded", function () {
    const startDate = new Date("2024-10-17T00:00:00Z"); // UTC-–≤—Ä–µ–º—è —Å—Ç–∞—Ä—Ç–∞
    const durationElement = document.getElementById("loveDuration");

    function getWordForm(number, one, few, many) {
        if (number % 10 === 1 && number % 100 !== 11) return one;
        if (number % 10 >= 2 && number % 10 <= 4 && (number % 100 < 10 || number % 100 >= 20)) return few;
        return many;
    }

    function calculateDuration() {
        const nowUTC = new Date();
        const utcOffset = 5 * 60 * 60 * 1000; // –°–º–µ—â–µ–Ω–∏–µ UTC+5 –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
        const currentDate = new Date(nowUTC.getTime() + utcOffset); // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –≤—Ä–µ–º—è
        
        const timeDiff = currentDate - startDate;
        
        const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));

        durationElement.innerHTML = `${days} ${getWordForm(days, "–¥–µ–Ω—å", "–¥–Ω—è", "–¥–Ω–µ–π")} –∏ 
            ${hours} ${getWordForm(hours, "—á–∞—Å", "—á–∞—Å–∞", "—á–∞—Å–æ–≤")} <span class="heart-icon">‚ù§Ô∏è‚Äçüî•</span>`;
    }

    calculateDuration();
    setInterval(calculateDuration, 60000); // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É

    function createHeart() {
        const heart = document.createElement("div");
        heart.classList.add("heart");
        heart.innerHTML = "üíñ";
        document.body.appendChild(heart);

        const leftPosition = Math.random() * window.innerWidth * 0.9;
        heart.style.left = `${leftPosition}px`;
        heart.style.animationDuration = `${Math.random() * 3 + 2}s`;

        setTimeout(() => {
            heart.remove();
        }, 5000);
    }

    setInterval(createHeart, 700);
});
